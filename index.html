<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>温馨提示</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #f0f0f0;
            overflow: hidden;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        .tip-window {
            position: fixed;
            width: 250px;
            height: 60px;
            background: lightpink;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            border: 2px solid #ccc;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 1000;
            cursor: default;
            border-radius: 8px;
            transition: transform 0.3s ease;
        }
        
        .tip-window:hover {
            transform: scale(1.05);
        }
        
        #stopBtn {
            position: fixed;
            top: 10px;
            right: 10px;
            padding: 10px 20px;
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            z-index: 10000;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        #infoPanel {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(255,255,255,0.9);
            padding: 10px;
            border-radius: 5px;
            z-index: 10000;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div id="infoPanel">
        已创建: <span id="windowCount">0</span>/300 个窗口
    </div>
    <button id="stopBtn" onclick="stopProgram()">停止程序 (ESC)</button>

    <script>
        // 严格对应Python脚本的变量和逻辑
        let running = true;
        let windows = [];
        let createdWindows = 0;
        const maxWindows = 300;  // 对应Python中的300个窗口
        
        // 对应Python中的tips列表
        const tips = [
            '多喝水哦~', '保持微笑呀', '每天都要元气满满',
            '记得多吃水果', '保持好心情', '好好爱自己', '我想你了',
            '梦想成真', '期待下一次见面', '金榜提名',
            '顺顺利利', '早点休息', '愿所有烦恼都消失',
            '别熬夜', '今天过得开心嘛', '天冷了，多穿衣服'
        ];
        
        // 对应Python中的bg_colors列表
        const bgColors = [
            'lightpink', 'skyblue', 'lightgreen', 'lavender',
            'lightyellow', 'plum', 'coral', 'bisque', 'aquamarine',
            'mistyrose', 'honeydew', 'lavenderblush', 'oldlace'
        ];
        
        // 对应Python中的show_warm_tip函数
        function showWarmTip() {
            if (!running || createdWindows >= maxWindows) return;
            
            // 获取屏幕尺寸
            const screenWidth = window.innerWidth;
            const screenHeight = window.innerHeight;
            
            // 随机窗口位置
            const windowWidth = 250;
            const windowHeight = 60;
            const x = Math.floor(Math.random() * (screenWidth - windowWidth));
            const y = Math.floor(Math.random() * (screenHeight - windowHeight));
            
            // 随机选择提示和背景颜色
            const tip = tips[Math.floor(Math.random() * tips.length)];
            const bgColor = bgColors[Math.floor(Math.random() * bgColors.length)];
            
            // 创建窗口元素
            const tipWindow = document.createElement('div');
            tipWindow.className = 'tip-window';
            tipWindow.style.left = x + 'px';
            tipWindow.style.top = y + 'px';
            tipWindow.style.backgroundColor = bgColor;
            tipWindow.textContent = tip;
            
            // 窗口置顶（通过高z-index实现）
            tipWindow.style.zIndex = 1000 + createdWindows;
            
            document.body.appendChild(tipWindow);
            windows.push(tipWindow);
            createdWindows++;
            
            // 更新计数器
            document.getElementById('windowCount').textContent = createdWindows;
            
            console.log(`创建了第 ${createdWindows} 个窗口: "${tip}"`);
        }
        
        // 对应Python中的stop_program函数
        function stopProgram() {
            running = false;
            
            // 关闭所有窗口
            windows.forEach(window => {
                if (window.parentNode) {
                    document.body.removeChild(window);
                }
            });
            
            windows = [];
            console.log("程序已停止");
            
            // 显示停止信息
            const stopMsg = document.createElement('div');
            stopMsg.textContent = '程序已停止';
            stopMsg.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: white;
                padding: 20px;
                border: 2px solid #ff4757;
                border-radius: 10px;
                font-size: 18px;
                z-index: 10000;
            `;
            document.body.appendChild(stopMsg);
        }
        
        // 模拟Python中的多线程创建窗口 - 调整速度更慢
        function startWindowCreation() {
            let delay = 0;
            
            // 对应Python中的循环创建300个窗口，但速度更慢
            for (let i = 0; i < maxWindows; i++) {
                // 使用递增的延迟时间，让窗口出现越来越慢
                delay += 50 + Math.random() * 100;  // 50-150毫秒间隔
                
                setTimeout(() => {
                    if (running) {
                        showWarmTip();
                    }
                }, delay);
            }
        }
        
        // ESC键绑定
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                stopProgram();
            }
        });
        
        // 页面加载后开始执行
        window.addEventListener('load', function() {
            console.log("开始创建温馨提示窗口...");
            console.log("窗口生成速度已调慢，请耐心等待...");
            startWindowCreation();
        });
        
        // 对应Python中的主循环
        function mainLoop() {
            if (running) {
                setTimeout(mainLoop, 100);  // 对应time.sleep(0.1)
            }
        }
        
        // 启动主循环
        mainLoop();
        
        // 添加完成检测
        function checkCompletion() {
            if (createdWindows >= maxWindows && running) {
                console.log("所有300个窗口已创建完成！");
                const completionMsg = document.createElement('div');
                completionMsg.textContent = '所有300个祝福窗口已创建完成！';
                completionMsg.style.cssText = `
                    position: fixed;
                    top: 60px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: #4CAF50;
                    color: white;
                    padding: 15px 25px;
                    border-radius: 10px;
                    font-size: 16px;
                    z-index: 10000;
                `;
                document.body.appendChild(completionMsg);
                
                // 5秒后隐藏完成消息
                setTimeout(() => {
                    if (completionMsg.parentNode) {
                        document.body.removeChild(completionMsg);
                    }
                }, 5000);
            }
        }
        
        // 定期检查完成状态
        setInterval(checkCompletion, 1000);
    </script>
</body>
</html>
